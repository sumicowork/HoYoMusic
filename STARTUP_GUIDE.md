# HoYoMusic ä¸€é”®å¯åŠ¨è„šæœ¬ä½¿ç”¨æŒ‡å—

**åˆ›å»ºæ—¥æœŸ**: 2026-02-18  
**é€‚ç”¨ç³»ç»Ÿ**: Windows 10/11  

---

## ğŸ“‹ è„šæœ¬æ–‡ä»¶è¯´æ˜

### å¯åŠ¨è„šæœ¬
1. **start-dev.bat** (æ¨è) â­
   - Windowsæ‰¹å¤„ç†æ–‡ä»¶
   - åŒå‡»å³å¯è¿è¡Œ
   - æ— éœ€é¢å¤–é…ç½®

2. **start-dev.ps1**
   - PowerShellè„šæœ¬
   - åŠŸèƒ½æ›´ä¸°å¯Œ
   - å¯èƒ½éœ€è¦æ‰§è¡Œç­–ç•¥è®¾ç½®

### åœæ­¢è„šæœ¬
1. **stop-dev.bat** (æ¨è) â­
   - å¿«é€Ÿåœæ­¢æ‰€æœ‰æœåŠ¡
   - åŒå‡»å³å¯è¿è¡Œ

2. **stop-dev.ps1**
   - PowerShellç‰ˆæœ¬
   - æ›´ç²¾ç¡®çš„è¿›ç¨‹æ§åˆ¶

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1: ä½¿ç”¨.batæ–‡ä»¶ (æ¨è)

#### å¯åŠ¨æœåŠ¡
```
1. åŒå‡» start-dev.bat
2. ç­‰å¾…æœåŠ¡å¯åŠ¨ï¼ˆä¼šè‡ªåŠ¨æ‰“å¼€ä¸¤ä¸ªçª—å£ï¼‰
3. æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ http://localhost:5173
```

#### åœæ­¢æœåŠ¡
```
1. åŒå‡» stop-dev.bat
   æˆ–
2. æ‰‹åŠ¨å…³é—­å‰åç«¯çª—å£
```

### æ–¹æ³•2: ä½¿ç”¨PowerShellè„šæœ¬

#### é¦–æ¬¡ä½¿ç”¨éœ€è¦è®¾ç½®æ‰§è¡Œç­–ç•¥
```powershell
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒPowerShell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

# ç¡®è®¤æ›´æ”¹
Y
```

#### å¯åŠ¨æœåŠ¡
```
1. å³é”® start-dev.ps1 â†’ ä½¿ç”¨PowerShellè¿è¡Œ
   æˆ–
2. åœ¨PowerShellä¸­: .\start-dev.ps1
```

#### åœæ­¢æœåŠ¡
```
1. å³é”® stop-dev.ps1 â†’ ä½¿ç”¨PowerShellè¿è¡Œ
   æˆ–
2. åœ¨PowerShellä¸­: .\stop-dev.ps1
```

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### è‡ªåŠ¨æ£€æµ‹
- âœ… Node.jså®‰è£…æ£€æµ‹
- âœ… PostgreSQLæœåŠ¡æ£€æµ‹
- âœ… ä¾èµ–å®‰è£…æ£€æµ‹

### è‡ªåŠ¨å®‰è£…
- âœ… é¦–æ¬¡è¿è¡Œè‡ªåŠ¨å®‰è£…å‰ç«¯ä¾èµ–
- âœ… é¦–æ¬¡è¿è¡Œè‡ªåŠ¨å®‰è£…åç«¯ä¾èµ–
- âœ… ä¾èµ–å·²å®‰è£…åˆ™è·³è¿‡

### æ™ºèƒ½å¯åŠ¨
- âœ… åç«¯åœ¨ç‹¬ç«‹çª—å£è¿è¡Œï¼ˆç«¯å£3000ï¼‰
- âœ… å‰ç«¯åœ¨ç‹¬ç«‹çª—å£è¿è¡Œï¼ˆç«¯å£5173ï¼‰
- âœ… è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
- âœ… å½©è‰²è¾“å‡ºä¾¿äºåŒºåˆ†

### ä¾¿æ·ç®¡ç†
- âœ… å¯å•ç‹¬å…³é—­å‰ç«¯æˆ–åç«¯
- âœ… ä¸€é”®åœæ­¢æ‰€æœ‰æœåŠ¡
- âœ… çª—å£æ ‡é¢˜æ¸…æ™°æ ‡è¯†

---

## ğŸ“Š å¯åŠ¨æµç¨‹

```
å¯åŠ¨è„šæœ¬æ‰§è¡Œ
    â†“
æ£€æŸ¥Node.js
    â†“
æ£€æŸ¥PostgreSQL
    â†“
æ£€æŸ¥åç«¯ä¾èµ–
    â”œâ”€ æœªå®‰è£… â†’ npm install
    â””â”€ å·²å®‰è£… â†’ è·³è¿‡
    â†“
å¯åŠ¨åç«¯ (æ–°çª—å£)
    â†“
ç­‰å¾…2ç§’
    â†“
æ£€æŸ¥å‰ç«¯ä¾èµ–
    â”œâ”€ æœªå®‰è£… â†’ npm install
    â””â”€ å·²å®‰è£… â†’ è·³è¿‡
    â†“
å¯åŠ¨å‰ç«¯ (æ–°çª—å£)
    â†“
ç­‰å¾…5ç§’
    â†“
è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    â†“
å®Œæˆ
```

---

## ğŸ–¥ï¸ çª—å£è¯´æ˜

### å¯åŠ¨åä¼šå‡ºç°3ä¸ªçª—å£

1. **ä¸»çª—å£** (start-dev)
   - æ˜¾ç¤ºå¯åŠ¨æ—¥å¿—
   - å¯ä»¥å…³é—­ï¼ˆä¸å½±å“æœåŠ¡ï¼‰

2. **åç«¯çª—å£** (HoYoMusic Backend)
   - ç´«è‰²ä¸»é¢˜
   - æ˜¾ç¤ºåç«¯æ—¥å¿—
   - å…³é—­çª—å£ = åœæ­¢åç«¯æœåŠ¡

3. **å‰ç«¯çª—å£** (HoYoMusic Frontend)
   - ç»¿è‰²ä¸»é¢˜
   - æ˜¾ç¤ºå‰ç«¯æ—¥å¿—
   - å…³é—­çª—å£ = åœæ­¢å‰ç«¯æœåŠ¡

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: åŒå‡».batæ–‡ä»¶é—ªé€€
**åŸå› **: è„šæœ¬æ‰€åœ¨è·¯å¾„åŒ…å«ä¸­æ–‡æˆ–ç©ºæ ¼  
**è§£å†³**: 
```
1. å°†é¡¹ç›®ç§»åˆ°çº¯è‹±æ–‡è·¯å¾„
2. æˆ–å³é”® â†’ ç¼–è¾‘ï¼Œæ£€æŸ¥é”™è¯¯
```

### Q2: PowerShellè„šæœ¬æ— æ³•è¿è¡Œ
**é”™è¯¯ä¿¡æ¯**: "æ— æ³•åŠ è½½ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬"  
**è§£å†³**:
```powershell
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒPowerShell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### Q3: æç¤º"ç«¯å£å·²è¢«å ç”¨"
**åŸå› **: ç«¯å£3000æˆ–5173å·²è¢«å…¶ä»–ç¨‹åºä½¿ç”¨  
**è§£å†³**:
```
æ–¹æ³•1: è¿è¡Œ stop-dev.bat åœæ­¢æœåŠ¡
æ–¹æ³•2: æ‰‹åŠ¨å…³é—­å ç”¨ç«¯å£çš„ç¨‹åº
æ–¹æ³•3: ä¿®æ”¹ç«¯å£é…ç½®
   - åç«¯: backend/.env ä¸­çš„ PORT
   - å‰ç«¯: frontend/vite.config.ts ä¸­çš„ port
```

### Q4: PostgreSQLæœåŠ¡æœªè¿è¡Œ
**è§£å†³**:
```
æ–¹æ³•1: å¯åŠ¨æœåŠ¡
   services.msc â†’ æ‰¾åˆ°PostgreSQL â†’ å¯åŠ¨

æ–¹æ³•2: å‘½ä»¤è¡Œå¯åŠ¨
   net start postgresql-x64-14
```

### Q5: npm installå¤±è´¥
**åŸå› **: ç½‘ç»œé—®é¢˜æˆ–æƒé™é—®é¢˜  
**è§£å†³**:
```powershell
# è®¾ç½®æ·˜å®é•œåƒ
npm config set registry https://registry.npmmirror.com

# æ¸…é™¤ç¼“å­˜
npm cache clean --force

# é‡æ–°å®‰è£…
cd backend
npm install

cd ../frontend
npm install
```

---

## ğŸ“ æ‰‹åŠ¨å¯åŠ¨æ–¹å¼

å¦‚æœè„šæœ¬æ— æ³•ä½¿ç”¨ï¼Œå¯ä»¥æ‰‹åŠ¨å¯åŠ¨ï¼š

### åç«¯
```powershell
cd backend
npm install    # é¦–æ¬¡è¿è¡Œ
npm run dev
```

### å‰ç«¯
```powershell
cd frontend
npm install    # é¦–æ¬¡è¿è¡Œ
npm run dev
```

---

## ğŸ¯ ç«¯å£é…ç½®

### é»˜è®¤ç«¯å£
- åç«¯: `http://localhost:3000`
- å‰ç«¯: `http://localhost:5173`
- æ•°æ®åº“: `localhost:5432`

### ä¿®æ”¹ç«¯å£

#### åç«¯ç«¯å£
ç¼–è¾‘ `backend/.env`:
```
PORT=3000  # æ”¹ä¸ºå…¶ä»–ç«¯å£
```

#### å‰ç«¯ç«¯å£
ç¼–è¾‘ `frontend/vite.config.ts`:
```typescript
server: {
  port: 5173  // æ”¹ä¸ºå…¶ä»–ç«¯å£
}
```

---

## ğŸ› ï¸ è„šæœ¬è‡ªå®šä¹‰

### ä¿®æ”¹è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨çš„å»¶è¿Ÿ
ç¼–è¾‘ `start-dev.bat` æˆ– `start-dev.ps1`:
```powershell
# å°†5æ”¹ä¸ºä½ æƒ³è¦çš„ç§’æ•°
timeout /t 5 /nobreak > nul
# æˆ–
Start-Sleep -Seconds 5
```

### ç¦ç”¨è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
æ³¨é‡Šæ‰è¿™ä¸€è¡Œ:
```bat
:: start http://localhost:5173
```
æˆ–
```powershell
# Start-Process "http://localhost:5173"
```

### ä¿®æ”¹çª—å£é¢œè‰²
ç¼–è¾‘ `start-dev.bat`:
```bat
color 0B  # 0=é»‘åº•ï¼ŒB=æµ…é’è‰²
# å…¶ä»–é¢œè‰²: 0A=ç»¿è‰², 0C=çº¢è‰², 0D=ç´«è‰²
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
HoYoMusic/
â”œâ”€â”€ start-dev.bat          # å¯åŠ¨è„šæœ¬ (æ‰¹å¤„ç†)
â”œâ”€â”€ start-dev.ps1          # å¯åŠ¨è„šæœ¬ (PowerShell)
â”œâ”€â”€ stop-dev.bat           # åœæ­¢è„šæœ¬ (æ‰¹å¤„ç†)
â”œâ”€â”€ stop-dev.ps1           # åœæ­¢è„šæœ¬ (PowerShell)
â”œâ”€â”€ STARTUP_GUIDE.md       # æœ¬æ–‡æ¡£
â”œâ”€â”€ backend/               # åç«¯ç›®å½•
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/
â””â”€â”€ frontend/              # å‰ç«¯ç›®å½•
    â”œâ”€â”€ package.json
    â””â”€â”€ src/
```

---

## âš™ï¸ ç¯å¢ƒè¦æ±‚

### å¿…éœ€
- âœ… Windows 10/11
- âœ… Node.js 16+ (æ¨è18+)
- âœ… PostgreSQL 12+
- âœ… npm æˆ– yarn

### æ¨è
- âœ… PowerShell 5.1+
- âœ… Git (ç‰ˆæœ¬æ§åˆ¶)
- âœ… VSCode (ä»£ç ç¼–è¾‘)

---

## ğŸ” éªŒè¯å®‰è£…

### æ£€æŸ¥Node.js
```powershell
node --version
# åº”è¾“å‡º: v18.x.x æˆ–æ›´é«˜
```

### æ£€æŸ¥npm
```powershell
npm --version
# åº”è¾“å‡º: 9.x.x æˆ–æ›´é«˜
```

### æ£€æŸ¥PostgreSQL
```powershell
psql --version
# åº”è¾“å‡º: psql (PostgreSQL) 12.x æˆ–æ›´é«˜
```

---

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼
```
1. å³é”® start-dev.bat â†’ å‘é€åˆ° â†’ æ¡Œé¢å¿«æ·æ–¹å¼
2. é‡å‘½åä¸º"å¯åŠ¨HoYoMusic"
3. å³é”®å¿«æ·æ–¹å¼ â†’ å±æ€§ â†’ æ›´æ”¹å›¾æ ‡
```

### 2. å›ºå®šåˆ°ä»»åŠ¡æ 
```
1. åˆ›å»ºå¿«æ·æ–¹å¼ï¼ˆå¦‚ä¸Šï¼‰
2. å³é”®å¿«æ·æ–¹å¼ â†’ å›ºå®šåˆ°ä»»åŠ¡æ 
```

### 3. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
æ‰“å¼€æµè§ˆå™¨è®¿é—®:
- åç«¯å¥åº·æ£€æŸ¥: `http://localhost:3000/api`
- å‰ç«¯é¡µé¢: `http://localhost:5173`

### 4. æŸ¥çœ‹æ—¥å¿—
æ—¥å¿—ä¼šå®æ—¶æ˜¾ç¤ºåœ¨å¯¹åº”çª—å£ä¸­ï¼Œå¯ä»¥ï¼š
- Ctrl+C æš‚åœè¾“å‡º
- å³é”® â†’ æŸ¥æ‰¾ æœç´¢æ—¥å¿—
- æ»šåŠ¨æŸ¥çœ‹å†å²æ—¥å¿—

---

## ğŸš¨ æ•…éšœæ’é™¤

### æœåŠ¡æ— æ³•å¯åŠ¨
```powershell
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡
.\stop-dev.bat

# 2. æ¸…é™¤node_modulesé‡æ–°å®‰è£…
Remove-Item backend\node_modules -Recurse -Force
Remove-Item frontend\node_modules -Recurse -Force

# 3. é‡æ–°å¯åŠ¨
.\start-dev.bat
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```
1. æ£€æŸ¥PostgreSQLæœåŠ¡æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥backend/.envä¸­çš„æ•°æ®åº“é…ç½®
3. æµ‹è¯•è¿æ¥: psql -U postgres -d hoyomusic
```

### ç«¯å£å†²çª
```powershell
# æŸ¥æ‰¾å ç”¨ç«¯å£3000çš„è¿›ç¨‹
netstat -ano | findstr :3000

# ç»“æŸè¿›ç¨‹ (PIDä»ä¸Šä¸€æ­¥è·å–)
taskkill /PID <PID> /F
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®æ€»è§ˆ](./README.md)
- [è®¾ç½®æŒ‡å—](./SETUP_GUIDE.md)
- [TagåŠŸèƒ½æ–‡æ¡£](./TAG_ADVANCED_FEATURES.md)
- [æ’­æ”¾é˜Ÿåˆ—åŠŸèƒ½](./PLAYQUEUE_FEATURE_COMPLETION.md)

---

## ğŸ‰ å¿«é€Ÿå‘½ä»¤æ€»ç»“

```powershell
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
.\start-dev.bat

# åœæ­¢æ‰€æœ‰æœåŠ¡
.\stop-dev.bat

# ä»…å¯åŠ¨åç«¯
cd backend && npm run dev

# ä»…å¯åŠ¨å‰ç«¯
cd frontend && npm run dev

# é‡æ–°å®‰è£…ä¾èµ–
cd backend && npm install && cd ../frontend && npm install

# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr :3000
netstat -ano | findstr :5173
```

---

**ç»´æŠ¤è€…**: GitHub Copilot  
**ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2026-02-18

---

ğŸŠ **äº«å—å¼€å‘å§ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹å¸¸è§é—®é¢˜éƒ¨åˆ†ã€‚**

