# TAG功能使用指南

## 快速开始

### 1. 创建标签 (Tag Management页面)

访问路径: `http://localhost:5173/admin/tags`

**步骤**:
1. 登录管理后台
2. 点击顶部导航栏的 **"Tag Management"** 按钮
3. 点击右上角 **"创建标签"** 按钮
4. 填写标签信息:
   - **标签名称** (必填): 例如 "原神"、"战斗BGM"、"主题曲"
   - **标签颜色** (必填): 点击颜色选择器选择颜色
   - **描述** (可选): 例如 "原神游戏相关音乐"
5. 点击 **"保存"**

### 2. 为单曲添加标签 (Admin页面)

访问路径: `http://localhost:5173/admin`

**步骤**:
1. 在Admin页面找到要添加标签的歌曲
2. 点击该歌曲操作栏的 **"Tags"** 按钮
3. 在弹出的对话框中:
   - 上半部分显示当前已添加的标签（彩色标签，可点击X删除）
   - 下半部分有下拉选择框
4. 点击下拉框，选择要添加的标签
5. 标签会立即添加到歌曲上
6. 完成后点击 **"关闭"** 按钮

### 3. 编辑标签

**步骤**:
1. 进入 Tag Management 页面
2. 找到要编辑的标签
3. 点击该标签的 **"编辑"** 按钮
4. 修改标签名称、颜色或描述
5. 点击 **"保存"**

### 4. 删除标签

**步骤**:
1. 进入 Tag Management 页面
2. 找到要删除的标签
3. 点击该标签的 **"删除"** 按钮
4. 在确认对话框中点击 **"确定"**
5. 标签将被删除，所有关联的歌曲将自动解除该标签

## 界面说明

### Admin页面 - 操作按钮

每首歌曲的操作栏有以下按钮（从左到右）:

| 按钮 | 图标 | 功能 |
|------|------|------|
| Play | ▶️ | 播放歌曲 |
| Edit | ✏️ | 编辑基本信息 |
| Lyrics | 📄 | 编辑歌词 |
| Credits | 👥 | 编辑制作人员 |
| **Tags** | 🏷️ | **管理标签** ⭐ |
| Download | ⬇️ | 下载歌曲 |
| Delete | 🗑️ | 删除歌曲 |

### Tag Management页面 - 表格列

| 列名 | 说明 | 示例 |
|------|------|------|
| 标签 | 颜色方块 + 标签名 | 🟦 原神 |
| 描述 | 标签的描述信息 | "原神游戏相关音乐" |
| 歌曲数量 | 使用该标签的歌曲数 | "12 首" |
| 创建时间 | 标签创建日期 | "2026/2/14" |
| 操作 | 编辑、删除按钮 | [编辑] [删除] |

### 单曲标签管理对话框

```
┌─────────────────────────────────────────┐
│ 管理标签 - 歌曲名称                        │
├─────────────────────────────────────────┤
│ 当前标签：                                │
│                                          │
│  [ 原神 ×]  [ 战斗BGM ×]  [ 主题曲 ×]      │
│                                          │
│ 添加标签：                                │
│                                          │
│  [ 选择标签 ▼ ]                           │
│                                          │
│  💡 提示：您可以在"标签管理"页面创建新标签    │
│                                          │
│                              [ 关闭 ]     │
└─────────────────────────────────────────┘
```

## 常见操作场景

### 场景1: 为新专辑的所有歌曲添加游戏标签

假设你上传了一张原神的新专辑，想要为所有歌曲添加"原神"标签：

1. **首先确保标签存在**:
   - 进入 Tag Management → 检查是否有"原神"标签
   - 如果没有，点击"创建标签"创建一个

2. **为每首歌添加标签**:
   - 进入 Admin 页面
   - 找到第一首歌 → 点击 Tags → 选择"原神" → 关闭
   - 找到第二首歌 → 点击 Tags → 选择"原神" → 关闭
   - 重复操作...

3. **验证**:
   - 进入 Tag Management
   - 查看"原神"标签的歌曲数量是否正确

### 场景2: 管理标签分类

你想要创建一套标签系统来组织音乐：

**游戏分类标签**:
- 原神 (蓝色 #1890ff)
- 崩坏：星穹铁道 (紫色 #722ed1)
- 绝区零 (橙色 #fa8c16)

**类型分类标签**:
- 主题曲 (红色 #f5222d)
- 战斗BGM (绿色 #52c41a)
- 角色曲 (金色 #faad14)

**操作步骤**:
1. 进入 Tag Management
2. 依次创建所有标签，设置对应颜色
3. 回到 Admin 页面为歌曲添加相应标签
4. 每首歌可以有多个标签，例如：
   - "神女劈观" → [原神] [战斗BGM]
   - "疾如猛火" → [崩坏：星穹铁道] [战斗BGM]

### 场景3: 修改标签颜色

你想将"原神"标签的颜色从蓝色改为金色：

1. 进入 Tag Management
2. 找到"原神"标签
3. 点击"编辑"
4. 点击颜色选择器，选择金色
5. 点击"保存"
6. 所有使用该标签的地方都会自动更新颜色

### 场景4: 删除不再使用的标签

你想删除一个测试标签：

1. 进入 Tag Management
2. 找到要删除的标签
3. 点击"删除"
4. 确认删除
5. 该标签将从所有歌曲上移除，但歌曲本身不会被删除

## 用户端功能（已有）

标签添加完成后，用户可以：

1. **在首页按标签浏览**: 
   - 访问 `/tags` 页面
   - 以卡片形式展示所有标签
   - 点击标签查看该标签下的所有歌曲

2. **在单曲详情页查看标签**:
   - 访问 `/track/:id` 页面
   - 页面显示该歌曲的所有标签
   - 点击标签可跳转到标签详情页

3. **通过标签发现音乐**:
   - 例如想听原神的音乐，点击"原神"标签
   - 系统会展示所有标记为"原神"的歌曲

## 技巧和建议

### 标签命名建议

✅ **推荐**:
- 简短明了: "原神"、"战斗"、"主题曲"
- 有意义: "角色演示曲"、"剧情BGM"
- 层级明确: 可以用 "游戏名 - 类型" 如 "原神 - 角色曲"

❌ **不推荐**:
- 过长: "原神游戏中的所有战斗相关背景音乐"
- 模糊: "其他"、"杂项"
- 重复: 同时创建 "战斗BGM" 和 "战斗音乐"

### 标签颜色建议

- **游戏系列**: 使用游戏的主题色
  - 原神: 蓝色或金色
  - 崩铁: 紫色或银色
  - 绝区零: 橙色或黑色

- **类型分类**: 使用符合情感的颜色
  - 战斗/激昂: 红色、橙色
  - 轻松/日常: 绿色、浅蓝色
  - 悲伤/深沉: 深蓝色、灰色

### 标签使用建议

1. **适度使用**: 每首歌2-5个标签最佳
2. **保持一致**: 相同类型的歌曲使用相同的标签
3. **定期整理**: 定期检查标签使用情况，删除不用的标签
4. **避免冗余**: 不要创建意义重复的标签

## 故障排查

### 问题1: 无法创建标签

**症状**: 点击"保存"后提示"标签名称已存在"

**解决**:
- 检查是否已有同名标签
- 尝试使用不同的名称

### 问题2: Tags按钮不显示

**症状**: Admin页面看不到Tags按钮

**解决**:
1. 刷新页面 (F5)
2. 清除浏览器缓存
3. 检查是否已登录

### 问题3: 添加标签后没有反应

**症状**: 选择标签后没有显示

**解决**:
- 检查是否该标签已经添加过（不能重复添加）
- 关闭对话框重新打开检查
- 刷新页面

### 问题4: 删除标签后还能看到

**症状**: 删除标签后在某些地方还能看到

**解决**:
- 刷新页面
- 清除浏览器缓存
- 检查是否有其他同名标签

## 快捷方式

| 操作 | 路径 |
|------|------|
| 标签管理 | `/admin/tags` |
| 单曲管理 | `/admin` |
| 标签浏览（用户） | `/tags` |
| 标签详情（用户） | `/tags/:id` |

## 权限说明

| 功能 | 需要登录 | 说明 |
|------|---------|------|
| 查看标签列表 | ❌ | 所有人可见 |
| 按标签浏览歌曲 | ❌ | 所有人可用 |
| 创建标签 | ✅ | 仅管理员 |
| 编辑标签 | ✅ | 仅管理员 |
| 删除标签 | ✅ | 仅管理员 |
| 为歌曲添加标签 | ✅ | 仅管理员 |

## 更新日志

### v1.0 (2026-02-14)
- ✅ 创建标签管理页面
- ✅ 在Admin页面添加Tags按钮
- ✅ 集成单曲标签管理对话框
- ✅ 添加导航链接
- ✅ 完善标签CRUD功能

---

**需要帮助?** 查看 TAG_FEATURE_SUMMARY.md 了解技术实现细节

